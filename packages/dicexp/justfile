set fallback

prepare:
	just build-grammar
	just builtins build

type-check: prepare
	tsc --noEmit

test: type-check parsing--test executing--test

test-watch-ui:
	pnpm exec vitest --ui --open=false

parsing--test: prepare
	pnpm exec vitest --dir=test/parsing --run

executing--test: prepare
	pnpm exec vitest --dir=test/executing --run

bench: parsing--bench executing--bench

parsing--bench: prepare
	pnpm exec vitest bench --dir=test/parsing --run

executing--bench: prepare
	pnpm exec vitest bench --dir=test/executing --run

build: prepare type-check
	pnpm run build

publish-no-build:
	npm publish --access public